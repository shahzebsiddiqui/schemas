version: 0.0.1

missing_type:
  description: "type key is missing, this is a required field"
  module:
   -  "module purge &&  module load intel/17"
   -  "module purge &&  module load intel/18"
  compiler:
    source: src/hello.c
    name: intel
    cflags: "-O1"

missing_compiler:
  type: compiler
  description: "compiler key is missing, this is a required field"
  module:
   -  "module purge &&  module load intel/17"
   -  "module purge &&  module load intel/18"

invalid_type_value:
  type: script
  description: "invalid value for type field must be 'compiler' "
  module:
     - "module purge && module load gcc/4.0"
     - "module purge && module load gcc/6.0"
  compiler:
    source: src/hello.c
    name: gnu
    cflags: "-O1"

invalid_description_value:
  type: compiler
  description: 1
  module:
     - "module purge && module load gcc/4.0"
     - "module purge && module load gcc/6.0"
  compiler:
    source: src/hello.c
    name: gnu
    cflags: "-O1"

invalid_type_module:
  type: compiler
  description: "type for 'module' key, expecting type 'array' but received 'string' "
  module: "module purge && module load gcc/4.0"
  compiler:
    source: src/hello.c
    name: gnu
    cflags: "-O1"

module_mismatch_array_items:
  type: compiler
  description: "The module is an array of string items, this test as a mix of numbers and string"
  module:
    - 1
    - "module purge && module load intel"
  compiler:
    source: src/hello.c
    name: intel
    cflags: "-O1"

missing_source_in_compiler:
  type: compiler
  description: "missing source key in compiler object"
  module:
  - "module purge && module load gcc/4.0"
  compiler:
    name: gnu
    cflags: "-O1"

missing_a_compilername_in_compiler:
  type: compiler
  description: "missing name key in compiler object"
  module:
  - "module purge && module load gcc/4.0"
  compiler:
    source: src/hello.c

compiler_name_type_mismatch:
  type: compiler
  description: "compiler 'name' expects a string but received a list"
  foo: bar
  module:
  - "module purge && module load gcc/4.0"
  compiler:
    source: src/hello.c
    name: ["gnu", "intel"]
    cflags: "-O1"
    ldflags: "-lm"


test_additionalProperties_compiler:
  type: compiler
  description: "test additionalProperties in compiler object. Schema does not allow for additional keys"
  module:
  - "module purge && module load gcc/4.0"
  compiler:
    source: src/hello.c
    foo: bar
    name: gnu
    cflags: "-O1"
    ldflags: "-lm"

test_additionalProperties_main_schema:
  type: compiler
  description: "test additionalProperties in main schema"
  foo: bar
  module:
  - "module purge && module load gcc/4.0"
  compiler:
    source: src/hello.c
    name: gnu
    cflags: "-O1"
    ldflags: "-lm"

type_mismatch_exec_args:
  type: compiler
  description: "type mismatch on exec_args key"
  module:
  - "module purge && module load gcc/4.0"
  compiler:
    source: src/hello.c
    name: gnu
    cflags: "-O1"
    ldflags: "-lm"
    exec_args: 1
